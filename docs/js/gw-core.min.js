!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((n="undefined"!=typeof globalThis?globalThis:n||self).GW=n.GW||{})}(this,(function(n){"use strict";const t=[[0,1],[1,0],[0,-1],[-1,0],[1,1],[1,-1],[-1,-1],[-1,1]];function r(n,t,r){return n<t?t:n>r?r:n}function e(n){return n.x||n[0]||0}function o(n){return n.y||n[1]||0}function i(n,t,r,e){const o=Math.abs(n-r),i=Math.abs(t-e);return o+i-.6*Math.min(o,i)}function u(n,t,r,e){let o=r-n,i=e-t;if(o&&i){const n=Math.abs(o),t=Math.abs(i);n>=2*t?i=0:t>=2*n&&(o=0)}return[Math.sign(o),Math.sign(i)]}function s(n,t,r=null){let e;Object.keys(t).forEach((o=>{const i=o;let u=t[o];e=n;const s=o.split(".");for(;s.length>1;)o=s.shift(),void 0===e[o]?e=e[o]={}:"object"!=typeof e[o]?a("Trying to set default member on non-object config item: "+i):e=e[o];o=s.shift();let f=e[o];r&&r(e,o,f,u)||void 0===f&&(null===u?e[o]=null:Array.isArray(u)?e[o]=u.slice():e[o]=u)}))}function a(n){throw new Error(n)}var f={__proto__:null,DIRS:t,NO_DIRECTION:-1,UP:0,RIGHT:1,DOWN:2,LEFT:3,RIGHT_UP:4,RIGHT_DOWN:5,LEFT_DOWN:6,LEFT_UP:7,CLOCK_DIRS:[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],NOOP:function(){},TRUE:function(){return!0},FALSE:function(){return!1},ONE:function(){return 1},ZERO:function(){return 0},IDENTITY:function(n){return n},clamp:r,x:e,y:o,copyXY:function(n,t){n.x=e(t),n.y=o(t)},addXY:function(n,t){n.x+=e(t),n.y+=o(t)},equalsXY:function(n,t){return n.x==e(t)&&n.y==o(t)},lerpXY:function(n,t,i){i>1&&(i/=100),i=r(i,0,1);const u=e(t)-e(n),s=o(t)-o(n);return[e(n)+Math.floor(u*i),o(n)+Math.floor(s*i)]},distanceBetween:i,distanceFromTo:function(n,t){return i(e(n),o(n),e(t),o(t))},calcRadius:function(n,t){return i(0,0,n,t)},dirBetween:u,dirFromTo:function(n,t){return u(e(n),o(n),e(t),o(t))},dirIndex:function(n){const r=e(n),i=o(n);return t.findIndex((n=>n[0]==r&&n[1]==i))},isOppositeDir:function(n,t){return n[0]+t[0]==0&&n[1]+t[1]==0},isSameDir:function(n,t){return n[0]==t[0]&&n[1]==t[1]},dirSpread:function(n){const t=[n];return 0==n[0]?(t.push([1,n[1]]),t.push([-1,n[1]])):0==n[1]?(t.push([n[0],1]),t.push([n[0],-1])):(t.push([n[0],0]),t.push([0,n[1]])),t},stepFromTo:function(n,t,r){const i=e(n),u=o(n),s=[e(t)-i,o(t)-u],a=Math.abs(s[0])+Math.abs(s[1]),f=[0,0],c=[99999,99999];for(let n=0;n<=a;++n)f[0]=i+Math.floor(s[0]*n/a),f[1]=u+Math.floor(s[1]*n/a),f[0]==c[0]&&f[1]==c[1]||r(f[0],f[1]),c[0]=f[0],c[1]=f[1]},smoothHiliteGradient:function(n,t){return Math.floor(100*Math.sin(Math.PI*n/t))},assignOmitting:function(n,t,r){"string"==typeof n&&(n=n.split(/[,|]/g).map((n=>n.trim()))),Object.keys(r).forEach((e=>{n.includes(e)||function(n,t,r){const e=n[r],o=t[r];e&&e.copy&&o?e.copy(o):e&&e.clear&&!o?e.clear():e&&e.nullify&&!o?e.nullify():o&&o.clone?n[r]=o.clone():o&&Array.isArray(o)?n[r]=o.slice():e&&Array.isArray(e)?e.length=0:n[r]=o}(t,r,e)}))},setDefault:function(n,t,r){void 0===n[t]&&(n[t]=r)},setDefaults:s,kindDefaults:function(n,t){return s(n,t,(function(n,t,r,e){return!(t.search(/[fF]lags$/)<0)&&(r?"string"==typeof r?r=r.split(/[,|]/).map((n=>n.trim())):Array.isArray(r)||(r=[r]):r=[],"string"==typeof e?e=e.split(/[,|]/).map((n=>n.trim())):Array.isArray(e)||(e=[e]),n[t]=e.concat(r),!0)}))},pick:function(n,...t){const r={};return t.forEach((t=>{const e=n[t];void 0!==e&&(r[t]=e)})),r},clearObject:function(n){Object.keys(n).forEach((t=>n[t]=void 0))},ERROR:a,WARN:function(...n){console.warn(...n)},getOpt:function(n,t,r){const e=n[t];return void 0===e?r:e},firstOpt:function(n,...t){for(let r of t){if("object"!=typeof r||Array.isArray(r))return r;if(void 0!==r[n])return r[n]}},arraysIntersect:function(n,t){return n.some((n=>t.includes(n)))},sum:function(n){return n.reduce(((n,t)=>n+t))},chainLength:function(n){let t=0;for(;n;)t+=1,n=n.next;return t},chainIncludes:function(n,t){for(;n&&n!==t;)n=n.next;return n===t},eachChain:function(n,t){let r=0;for(;n;){const e=n.next;t(n,r++),n=e}return r},addToChain:function(n,t,r){return r.next=n[t]||null,n[t]=r,!0},removeFromChain:function(n,t,r){const e=n[t];if(e===r)return n[t]=r.next||null,r.next=null,!0;if(!e)return!1;{let n=e,t=n.next;for(;t&&t!==r;)n=t,t=n.next;if(t===r)return n.next=t.next||null,r.next=null,!0}return!1}};const c={make:()=>Math.random.bind(Math)};function l(n,t){let r,e,o;for(e=0,r=0;r<t.length;r++)e+=t[r];if(e<=0)return console.warn("Lottery Draw - no frequencies",t,t.length),0;for(o=n.range(0,e-1),r=0;r<t.length;r++){if(t[r]>o)return r;o-=t[r]}return console.warn("Lottery Draw failed.",t,t.length),0}class h{constructor(){this._fn=c.make()}seed(n){this._fn=c.make(n)}value(){return this._fn()}float(){return this.value()}number(n=0){return n=n||Number.MAX_SAFE_INTEGER,Math.floor(this._fn()*n)}int(n=0){return this.number(n)}range(n,t){if(t<=n)return t;const r=t-n+1;return n+this.number(r)}dice(n,t,r=0){let e=0,o=1;n<0&&(n=-n,o=-1),r=r||0;for(let r=0;r<n;++r)e+=this.range(1,t);return e*=o,e+r}weighted(n){return Array.isArray(n)?l(this,n):function(n,t){const r=Object.entries(t),e=r.map((([n,t])=>t));return r[l(n,e)][0]}(this,n)}item(n){return Array.isArray(n)||(n=Object.values(n)),n[this.range(0,n.length-1)]}key(n){return this.item(Object.keys(n))}shuffle(n,t=0,r=0){let e,o,i;for(2==arguments.length&&(r=t,t=0),r=r||n.length,e=t=t||0;e<r;e++)o=this.range(t,r-1),e!=o&&(i=n[o],n[o]=n[e],n[e]=i);return n}sequence(n){const t=[];for(let r=0;r<n;r++)t[r]=r;return this.shuffle(t)}chance(n,t=100){return!(n<=0)&&(n>=t||this.range(0,t-1)<n)}clumped(n,t,r){if(t<=n)return n;if(r<=1)return this.range(n,t);let e,o=0,i=Math.floor((t-n)/r);for(e=0;e<(t-n)%r;e++)o+=this.range(0,i+1);for(;e<r;e++)o+=this.range(0,i);return o+n}}const d=new h,m=new h;class p{constructor(n,t=0,r=1,e){this._rng=e||d,Array.isArray(n)?(r=n[2],t=n[1],n=n[0]):n instanceof p&&(r=n.clumps,t=n.hi,n=n.lo),t<n&&([t,n]=[n,t]),this.lo=n||0,this.hi=t||this.lo,this.clumps=r||1}value(){return this._rng.clumped(this.lo,this.hi,this.clumps)}toString(){return this.lo>=this.hi?""+this.lo:`${this.lo}-${this.hi}`}}var y={__proto__:null,Range:p,make:function(n,t){if(!n)return new p(0,0,0,t);if(n instanceof p)return n;if("function"==typeof n)throw new Error("Custom range functions not supported - extend Range");if(null==n)return new p(0,0,0,t);if("number"==typeof n)return new p(n,n,1,t);if(!0===n||!1===n)throw new Error("Invalid random config: "+n);if(Array.isArray(n))return new p(n[0],n[1],n[2],t);if("string"!=typeof n)throw new Error("Calculations must be strings.  Received: "+JSON.stringify(n));if(0==n.length)return new p(0,0,0,t);const r=/^(?:([+-]?\d*)[Dd](\d+)([+-]?\d*)|([+-]?\d+)-(\d+):?(\d+)?|([+-]?\d+)~(\d+)|([+-]?\d+\.?\d*))/g;let e;for(;null!==(e=r.exec(n));){if(e[2]){let n=Number.parseInt(e[1])||1;const r=Number.parseInt(e[2]),o=Number.parseInt(e[3])||0;return new p(o+n,o+n*r,n,t)}if(e[4]&&e[5]){const n=Number.parseInt(e[4]),r=Number.parseInt(e[5]),o=Number.parseInt(e[6]);return new p(n,r,o,t)}if(e[7]&&e[8]){const n=Number.parseInt(e[7]),r=Number.parseInt(e[8]);return new p(n-2*r,n+2*r,3,t)}if(e[9]){const n=Number.parseFloat(e[9]);return new p(n,n,1,t)}}throw new Error("Not a valid range - "+n)}};var g={Random:h,Range:p};n.configure=function(n){n.random&&function(n){if(n.make){if("function"!=typeof n.make)throw new Error("Random make parameter must be a function.");if("function"!=typeof n.make(12345))throw new Error("Random make function must accept a numeric seed and return a random function.");c.make=n.make,d.seed(),m.seed()}}(n.random)},n.cosmetic=m,n.random=d,n.range=y,n.types=g,n.utils=f,Object.defineProperty(n,"__esModule",{value:!0})}));
//# sourceMappingURL=gw-core.min.js.map
